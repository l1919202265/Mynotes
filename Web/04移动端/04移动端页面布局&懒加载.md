## 移动端页面布局&懒加载

### 水平居中

##### 行内元素，如文本居中，div中的图片居中

```css
text-align: center;
```

#### 块级元素

```css
定宽：可以采取绝对定位的方式实现
.center {
    width: 960px;
    position: absolute;
    left: 50%;
    //左外边距的 负宽度一半的距离
    margin-left: -480px;
 }
 
 定宽，不定宽都可以：借助css3的变形属性Transform来完成
 .content {
 	 width:80%;
     position: absolute;
     left: 50%;
     //向左移动自身宽度的一半
     transform: translateX(-50%);
 }


```



#### 垂直居中

##### 单行文本的垂直居中

```css
元素的高度和行高相等时，文本呈现垂直居中   height== line-height   高等于行高
```

##### 多行文本的垂直居中

```css
不固定高度的垂直居中
	通过设置padding实现
	
固定高度的垂直居中
	使用display设置为table-cell，配合样式vertical-align设置为middle来实现
	table-cell：以表格单元格的形式来解析代码
```



###### **多行文本不固定高度垂直居中通过padding实现案例：**

 ![image-20210413211637944](/image-20210413211637944.png)

```html
   <style>
        div{
            width: 400px;
            border: 2px solid #999;
            padding:20px 0px;
        }
    </style>
</head>

<body>
    <div>
        撑着油纸伞，独自彷徨在悠长，悠长又寂寥的雨巷，
        我希望逢着一个丁香一样的结着愁怨的姑娘。
        她是有丁香一样的颜色，丁香一样的芬芳，
    </div>
</body>
```



###### **多行文本固定高度的垂直居中**

```css
使用display设置为table-cell，配合样式vertical-align设置为middle来实现
table-cell：以表格单元格的形式来解析代码
```
```css
<style>
        div{
            width: 400px;
            height: 500px;
            border: 2px solid #999;
            padding:20px 0px;
            display: table-cell;
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <div>
        撑着油纸伞，独自彷徨在悠长，悠长又寂寥的雨巷，
        我希望逢着一个丁香一样的结着愁怨的姑娘。
        她是有丁香一样的颜色，丁香一样的芬芳，
    </div>
</body>
```



##### 块级元素垂直居中

##### 固定宽高的垂直居中

 <img src="/image-20210413213201927.png" alt="image-20210413213201927" style="zoom:50%;border:1px solid #999" />

```css
.content {
        width: 100px;
        height: 100px;
        position: absolute;
        left: 50%;
        top: 50%;
        margin-left: -50px;
        margin-top: -50px;
    }

```



##### 不固定宽高的垂直居中

```css
.content {
	   width: 30%; 
       height: 30%;
       position: absolute;
        left: 50%;
        top: 50%;
        /* 左/上边缘向左/上移动自身宽/高度的一半 */
        transform: translate(-50%, -50%);
    }

```



##### 基于Flex实现垂直居中

移动端开发中最佳的解决方案

```css
.content {
         /*转为flex弹性盒布局*/
        display: flex;
        /*主轴上的对齐方式为居中*/
        justify-content: center;
        /*交叉轴上对齐方式为居中*/
        align-items: center;
    }

```



```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        div{
            width: 800px;
            height: 500px;
            display: flex;
            flex-direction: column;
            background-color: rgb(28, 124, 108);
            justify-content: center;
            align-items: center;

        }
        span{
            
            width: 200px;
            height: 100px;
            background-color: rgb(250, 176, 176);
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div>
        <span></span>
        <span></span>
        <span></span>
    </div>
</body>
</html>
```



## 面试题： 如果让元素水平垂直居中



>     行内元素  文本的水平垂直居中
>
>     
>
>     单行文本 text-align:center   固定高： line-height:高度
>
>                                 无高： padding:30px 0;
>
>     
>
>     多行文本  text-align:center  无高：padding:30px 0;
>
>                                 固定的高： display:table-cell
>         
>                                                    vertical-align: middle
>
>     
>
>     
>
>     块级元素：
>
>         固定高的时候：   margin:  (父高-当前元素的高) /2  auto;
>         
>         无固定高：           margin:auto
>         
>                                       padding: 30px 0;
>
>     
>
>        定位  和 位移
>
>             需要水平垂直居中的元素  ： position:absolute
>         
>                                                              top:50%;
>         
>                                                              left:50%;
>         
>                                                              transform:translate(-50%,-50%)
>         
>             父元素：                                 position:relative
>
>     
>
>     
>
>     ​    
>
>         弹性布局：
>         
>          需要水平垂直居中的父元素： display:flex;
>         
>                                                             justify-content: center;
>         
>                                                             align-items: center;
>



## 2、掌握移动端布局的方法

百分比流式布局
响应式布局
基于rem的布局
Flex布局

#### 图片懒加载原理：

#### 响应式布局案例

##### 阶段一：制作当当书香节导航部分

需求说明
屏幕宽度大于1200px时，按钮一行显示5个

屏幕宽度大于768px小于1199px时，按钮一行显示4个

屏幕宽度大于480px小于767px时，按钮一行显示4个

屏幕宽度小于479px时，按钮一行显示3个

按钮中的字体及间距大小自行调节

每行显示的图片，在媒体查询时，使用百分比进行布局



```html
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>当当书香节</title>
    <!-- 引入初始化css样式 -->
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <div class="box">
        <!-- banner图 -->
        <img src="./images/jmsj_hw150316g.jpg" alt="" class="banner">

        <!-- 导航条 -->
        <div class="nav">
            <ul class="navaList">
                <li class="nav_li">
                    <a href="#">
                        <span>小说</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>青春动漫</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>经济管理</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>历史文化</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>人文社科</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>育儿产儿</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>旅游美食</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>中小学教辅</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>外语考试</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>文学艺术</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>成功励志</span>
                        <span> > </span>
                    </a>
                </li>

                <li class="nav_li">
                    <a href="#">
                        <span>传记</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>哲学心理</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>亲自家教</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>保健养生</span>
                        <span> > </span>
                    </a>
                </li>

                <li class="nav_li">
                    <a href="#">
                        <span>科技</span>
                        <span> > </span>
                    </a>
                </li>

                <li class="nav_li">
                    <a href="#">
                        <span>童书</span>
                        <span> > </span>
                    </a>
                </li>
                <li class="nav_li">
                    <a href="#">
                        <span>教材</span>
                        <span> > </span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- book box  书籍部分 -->
        <ul class="book_list">
            <li>
                <div class="book_cntent">
                    <img src="./images/xiaowangz.jpg" alt="">
                    <div class="book_name">狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）</div>
                    <div class="book_msg">
                        <div class="book_pric">
                            <p class="pric_n">￥19.9</p>
                            <p class="pric_o">39.8</p>
                        </div>
                        <div class="buy_btn">点击购买</div>
                    </div>
                </div>
            </li>

            <li>
                <div class="book_cntent">
                    <img src="./images/langtut.jpg" alt="">
                    <div class="book_name">狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）</div>
                    <div class="book_msg">
                        <div class="book_pric">
                            <p class="pric_n">￥19.9</p>
                            <p class="pric_o">39.8</p>
                        </div>
                        <div class="buy_btn">点击购买</div>
                    </div>
                </div>
            </li>
            <li>
                <div class="book_cntent">
                    <img src="./images/yelusheleng.jpg" alt="">
                    <div class="book_name">狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）</div>
                    <div class="book_msg">
                        <div class="book_pric">
                            <p class="pric_n">￥19.9</p>
                            <p class="pric_o">39.8</p>
                        </div>
                        <div class="buy_btn">点击购买</div>
                    </div>
                </div>
            </li>
            <li>
                <div class="book_cntent">
                    <img src="./images/pinang.jpg" alt="">
                    <div class="book_name">狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）</div>
                    <div class="book_msg">
                        <div class="book_pric">
                            <p class="pric_n">￥19.9</p>
                            <p class="pric_o">39.8</p>
                        </div>
                        <div class="buy_btn">点击购买</div>
                    </div>
                </div>
            </li>
            <li>
                <div class="book_cntent">
                    <img src="./images/dashuju.jpg" alt="">
                    <div class="book_name">狼图腾(修订版)（一部描绘、研究蒙古草原狼的“旷世奇书”）</div>
                    <div class="book_msg">
                        <div class="book_pric">
                            <p class="pric_n">￥19.9</p>
                            <p class="pric_o">39.8</p>
                        </div>
                        <div class="buy_btn">点击购买</div>
                    </div>
                </div>
            </li>
        </ul>
    </div>



</body>

</html>
```

index.css

```css
.box{
    background-color: rgb(1,25,87);
}

.banner{
    width: 100%;
    display: block;
}
.navaList{
    overflow: hidden;
    padding: 0 5px;
}
.nav_li{
    width: 25%;
    float: left;
    margin-bottom: 5px;
}

.nav_li>a{
    display: block;
    font-size: 17px;
    margin: 4px;
    padding: 5px 0;
    color: white;
    background-color: rgb(103,69,181);
    border-radius: 7px;
    text-align: center;
}

.nav_li>a{
    box-shadow: 0px 3px 02px rgb(127, 79, 189);
}
.nav_li>a>span:nth-of-type(2){
    display: inline-block;
    width: 20px;
    height: 20px;
    background-color: rgb(1,25,87);
    border-radius: 7px;
    float: right;
    margin-right: 10px;
    line-height: 20px;
    text-align: center;
}


.book_list{
    overflow: hidden;
    margin-top: 30px;
    padding: 0 5px;
}

.book_list li{
    width: 50%;
    float: left;
   
    
    
}

.book_cntent{
    background-color: #fff;
    margin: 5px;
    border-radius: 7px;
    overflow: hidden;
    padding: 5px;
}
.book_cntent>img{
    width: 100%;
}

.book_name{
    margin-top: 20px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    font-size: 20px;
}
.book_msg{
    margin-top: 10px;
}
.book_pric{
    float: left;
}
.pric_n{
    color: red;
    font-size: 24px;
    font-weight: bold;
}
.pric_o{
    color: rgb(34, 31, 31);
    font-size: 20px;
    text-decoration: line-through;
}

.buy_btn{
    float:right;
    width: 49px;
    height: 49px;
    font-size: 18px;
    font-weight: 900;
    background-color: rgb(241, 59, 59);
    color: white;
    text-align: center;
    border-radius: 5px;
}
```

##### 阶段二

需求说明
这一块需要使用百分比布局产品列表，随着屏幕宽度的变化，产品会自动适应屏幕的变化做出相应的调整，这一块并没有用到媒体查询进行控制

懒加载：

所谓图片懒加载，就是想让页面在展示图片的时候，不一下子全部开始加载，而是等到屏幕快滑到该图片的时候，再开始加载，这样做的好处，提高网页加载效率，节省用户流量

那么什么时候开始加载呢？

已加载高度 + 屏幕高度 >=  未加载区域-20

说明下面未加载区域已经窜到屏幕上了，此时不加载，更待何时呢？？？？



自定义属性

```html
 <img src="./images/bg_pic.png" data-realSrc="./images/xiaowangz.jpg" class="images">
```



```javascript
// 1.定义一个图片懒加载的函数
function lazyImg() {

    // 1.获取页面已经滚动的高度   获取当前设备的高度
    var scroolTop = document.documentElement.scrollTop || document.body.scrollTop;
    var clientHeight = document.documentElement.clientHeight || document.body.clientHeight;
    // 2.获取到所有的图片资源
    var images = document.getElementsByClassName('images');
    // 3.遍历图片  通过当前图片的自定属性 找到真是的图片路径
    for (var img of images) {

        // 4.找到当前图片距离页面最上面的距离  < = 获取页面已经滚动的高度 +  获取当前设备的高度
        // 5.替换图片资源 把真是的图片路径 替换当前图片的src

        if (((img.offsetTop - 100) <= (scroolTop + clientHeight)) && (img.getAttribute('data-realsrc'))) {
            //真实路径
            var realSrc = img.getAttribute('data-realsrc');
            console.log(realSrc);
            img.src = realSrc;
            //不让已经加载的图片 再次进入当前判断中
            img.removeAttribute("data-realsrc");
        }
    }

}
```