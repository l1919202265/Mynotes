## 移动端基础

本章目标

了解移动端产品分类及现状

会调试移动端项目

会使用viewport视口标签定义理想视口

会使用rem布局网页---重点

### 什么是移动web

移动web,运行在移动设备上的页面网页

移动设备包括:手机 平板 地铁展示栏.商场的智能导航机器人其他的一些持触摸设备等

### 产品分类

app(手机应用)

现在流行的app大部分都是原生app开发者开发

​	安卓开发工程师

​	ios开发工程师

使用JavaScript来开发原生app

> phoneGap
>
> React native ...

uniapp

### H5

是一项综合的技术,基本都是运行在浏览器中

> PC浏览器:Chrome	Safari	火狐
>
> 移动端浏览器:后续专门介绍

### APP与H5的优劣势

App

> 优势:
>
> > 功能完善[如何调用产品电量]	体验好	可以离线使用[没有网页调用]

> 劣势:
>
> > 开发成本高[不同平台的需要开发不同的版本]	迭代不可控[上线通过的时间不受控制]	内容限制

H5

> 优势:
>
> > 跨平台	开发成本低	更容易迭代[连上服务器直接上传修改]

> 劣势
>
> > 功能有限	操作体验欠佳	无法离线使用

### H5运行环境的分类

移动端浏览器

原生App的webview中(hyBrid模式)

开发的H5页面嵌入到App的webview中显示

[webview就像一个嵌套在App的浏览器



为什么会出现这种浏览器?

> 很好的发挥两者的优势,规避两者的弱势
>
> 涉及到操作系统级别的选择用app来做,需要及时更新的就选择H5,分工明确
>
> 这种模式,可能就是以后工作中最经常用到的

webview不需要我们 来书写,安卓和iOS内部已经有这个东西了,我们只需要吧写好的页面传到服务器上,把服务器地址给安卓或iOS工程师即可,由他们把我们放入我们的页面放入webview中



安卓加载页面代码:[了解]

```js
//方式一:加载一个页面
webView.loadUrL('http://www.baidu.com');

//方式二:加载应用资源文件内的网页
webView.loadUrL('file:///android_asset/test.html');

//方式三:加载一段代码
webView.loadUrl(String data,String mimeType,String encoding);
```

### PC与移动web开发的区别

> 终端设备

> 输入特性
>
> > pc:靠键盘输入
> >
> > 移动端:软键盘	语音输入	科大讯飞

> 屏幕
>
> > pc:分辨率差别不大,不论什么样的分别率都需要版心放素材
> >
> > 移动端:移动设备屏幕大小分辨率各种各样曾出不穷,需要兼容不同的屏幕

> 浏览器
>
> > 浏览器差别不大,都是使用同样的内核	谷歌	IE等等

> 开发调试
>
> 移动端:
>
> 视口:
>
> > 布局视口:
> >
> > > 在写h5页面时候进行的布局分配
> >
> > 视觉视口:
> >
> > > 看到屏幕的样子

> 布局方式
>
> > 我们前面学习的pc端的布局	浮动定位等等	在移动端同样适用

### 移动端屏幕

> DPI
>
> > 代表屏幕每英寸的像素数量,即像素密度
> >
> > 高DPI屏幕显示的元素会比较精细(看起来会比较小),低DPI屏幕显示的元素相对来说就比较粗糙(看起来会比较大)

> 像素分类:
>
> > 设备像素(device independt pixels):
> >
> > 设备屏幕的物理像素,任何设备的物理像素的数量都是固定的

> css像素(css pixels):
>
> > 又称逻辑像素,是为 web开发者创造的,在css和JavaScript中使用的一个抽象的层[就是我们自己书写的多少px的像素]

#### 屏幕缩放

##### pc端:

> css的1个像素往往都是对应电脑屏幕的1个物理像素

##### 移动端:

> 由于屏幕尺寸的限制,缩放是经常性的操作
>
> 缩小操作时,1个设备像素覆盖了多少个css像素
>
> 放大操作时,1个css像素覆盖了多少个设备像素

#### DPR:设备像素比

设备像素比DPR(device Pixels Ratio)是默认缩放为100%的情况下,设备像素和css像素的比值

> DPR=设备像素/css像素(某一方向上)

DPR值越大,屏幕分辨率越高

DPR=640/320;	2

#### Retina屏幕

同样大小的屏幕上,像素多了一倍,DPR=2;

DPR=2的屏幕上最早出现在苹果4s这款手机上

#### 移动端浏览器及内核分析

##### pc浏览器

Chrome	Safari	Firefox	IE

##### 移动端浏览器类型

内置浏览器[手机到手后,手机厂商已经内置号的浏览器]

可下载浏览器[可自行下载浏览器]

代理浏览器[知道]

webView[H5页面运行在app端内部的浏览器]



##### 内核

> 浏览器内核:也被称为渲染引擎或排版引擎,主要用于对网页语法进行解释,并进行网页渲染,将网页代码转换为看得到的页面,可分为两部分:渲染引擎和js引擎

Gecko内核,css前缀为'-moz-',代表Firefox

WebKit内核,css前缀为"-webkit-",代表Chrome	苹果	微信等

Presto内核,css前缀为"-o-",代表Opera(欧朋)

Trident内核,css前缀为"-ms-"代表IE



移动端开发测试浏览器

使用Chrome浏览器作为移动开发测试浏览器的原因,很多的手机都用webkit为渲染引擎

Chrome浏览器移动测试

> 浏览器的基本设置-清除缓存
>
> 勾选代表清除缓存,应用场景:
>
> > 我们更新完html代码,发现不生效,是因为此时浏览器给我们展示的缓存的数据,此时需要清除缓存,擦能展示最新的内容

### 视口

> ###### 布局视口:写html代码时的布局宽高
>
> ```html
> <style>
>     header{height: 50px ; background: pink; margin-bottom: 10px;}
>     aside{width: 30%; background: red; height: 300px; float: left;}
>     article{width: 68%; background: pink; height: 300px; float: left;}
> </style>
> <body>
>     <header></header>
>     <aside></aside>
>     <article></article>
> </body>
> 
> ```
>
> > 把以上代码放在移动设备上预览,页面整体被压缩,相同的内容,当窗口变窄,只是尽可能缩小网站来让用户看到网站的全貌,这对易读性来说不是件好事,在移动端上如何显示pc端的网页呢,在移动端上视口与移动浏览器屏幕宽度不在相关联,而是完全独立的,我们称它为布局视口,实际为卓面容纳浏览器设计的网站,默认的布局视口宽度大于手机屏幕的宽度
> >
> > ###### 视觉视口:眼在页面上看到的内容
> >
> > 虽然布局视口很大程度上帮助了桌面网站到手机的转移,但我们还是不能完全无视移动端设备的屏幕尺寸
> >
> > > 视觉视口使用户设备所能看到的网站区域,就是浏览器的宽高,只是在pc端,浏览器窗口可以随意改变大小,我们可以直观的看道,而在client端,大部分手机	平板的浏览器是不支持改变浏览器宽高的,所以其视觉视口就是其屏幕大小,用户可以通过缩放来操作视觉视口,同时不会影响布局视口,布局视口仍然保持原来的宽度	需要注意的is视觉视口与设备屏幕一样宽,并且它的css像素的数量会随着用户的缩放而改变

> ###### 理想视口:
>
> > 默认情况下,一个手机或平板浏览器的布局狂赌在980px或1024px,虽然这能让桌面网站不被压扁,但是这并不理想,尤其对手机用户,因为子啊狭窄的屏幕上更适合一个狭窄的网站	那么真正适合手机的视口是什么呢?

>###### viewport理想视口
>
>> 布局视口宽度=视觉视口宽度=设备宽度(=内容宽度)
>>
>> ```html
>> <meta name="viewport" content="width=device-width, initial-scale=1.0 "/>;
>> ```
>>
>> ```html
>> <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no,maximum-scale=1.0,minimum-scale=1.0">
>> ```
>>
>> 

###### 自定义用户代码片段

```json
{
	"html": {
		"prefix": "html",
		"body": [
			"<!DOCTYPE html>",
			"<html>\n",
			"<head>",
			"\t<meta charset=\"UTF-8\">",
			"\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">",
			"\t<meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">",
			"\t<title>Document</title>",
			"\t<link rel=\"stylesheet\" href=\"$1\">",
			"\t<script src=\"$2\"></script>",
			"</head>\n",
			"<body>\n$3",
			"</body>\n",
			"</html>"
		],
		"description": "The full sample code - html5."
	}
}
```

### 移动网页开发

###### 移动网页开发和pc网页开发有什么异同?

> ###### 不同点
>
> > 适配不同的分辨率和屏幕尺寸
> >
> > 兼容的浏览器

> ###### 不同点
>
> > 布局结构
> >
> > 使用的技术

### 使用相对长度单位em布局网页内容

em是描述相对于当前对象内文本的字体尺寸,它是相对长度单位[相对于父元素的font-size值进行变化的]

一般浏览器字体大小默认为16px

使用场景:当首行缩进字体的时候

###### 相对单位em的特性

> em的单位并不是固定的
>
> em会继承父级元素的字体大小(相对于父级的字体大小二发生变化)

### 相对单位rem

相对单位的特性:

> rem的值并不是固定的
>
> rem是相对根节点html发生变化的(和父节点无关)
>

 实际开发中一般默认的把html根节点设置为10px(62.5%)或者是100px,方便后续计算



通过js和rem动态设置字体大小

```html
<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <style>
        	 a {
  				text-decoration: none;
			}
			li {
  				list-style: none;
			}
			* {
  				margin: 0;
  				padding: 0;
			}
			.phonebox {
  				height: 100Vh;
  				background-color: #eeeeee;
			}
			.phonebox header nav {
  				display: flex;
  				align-items: center;
  				padding: 1rem 0;
  				justify-content: space-around;
  				font-size: 18px;
  				background: url(../images/back.png) 0rem center no-repeat;
  				background-size: 10%;
  				background-color: red;
  				color: white;
			}
			.phonebox main ul:nth-of-type(1) li {
  				font-size: 1.6rem;
  				display: flex;
  				padding: 0 1rem;
  				align-items: center;
  				height: 4rem;
  				box-shadow: 0 0 0.1rem gray;
  				background-color: white;
			}
			.phonebox main ul:nth-of-type(2) {
  				margin-top: 1rem;
			}
			.phonebox main ul:nth-of-type(2) li {
  				font-size: 1.6rem;
  				display: flex;
  				padding: 0 1rem;
  				align-items: center;
  				height: 4rem;
  				box-shadow: 0 0 0.1rem gray;
  				background-color: white;
			}
			.phonebox footer {
  				margin-top: 1rem;
			}
			.phonebox footer a {
  				height: 4rem;
  				font-size: 1.6rem;
  				color: #f66666;
  				background-color: white;
  				display: flex;
  				align-items: center;
  				justify-content: space-around;
			}

        </style>
    </head>

    <body>
        <div class="phonebox">
            <header>
                <nav>设置</nav>
            </header>
            <main>
                <ul>
                    <li>个人信息</li>
                    <li>清空缓存</li>
                </ul>
                <ul>
                    <li>关于我们</li>
                    <li>意见反馈</li>
                    <li>检查更新</li>
                </ul>
            </main>
            <footer>
                <a href="#">退出当前账号</a>
            </footer>
        </div>
    </body>

</html>
<script>
    function setRem() {
        var uiWidth = 375;
        var clientWidth = document.documentElement.clientWidth || document.body.clientWidth;
        var html = document.getElementsByTagName('html')[0];
        html.style.fontSize = (clientWidth / uiWidth) * 10 + 'px'
    }
    window.addEventListener('resize', setRem);
    window.addEventListener('load', setRem);
</script>
```

> 相对单位em是集相对大小和绝对大小的有点与一身
>
> 通过它既可以做到只修改根元素字体大小就成比例的调整页面所有字体大小
>
> 又可以避免字体大小逐层复合的连锁反应