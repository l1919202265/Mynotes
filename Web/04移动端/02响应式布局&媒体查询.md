## 自适应和响应式布局

#### 自适应

> 为了解决在不同设备大小的设备上呈现相同的网页

#### 如何实现

> 自适应主要是指的宽度的自适应
>
> 百分比的流式布局【宽度按照百分比进行布局】

使用setRem.js,css布局单位px改为rem,rem单位为移动端适配

rem的大小根据根节点html的字体大小自行调整,例如:html字体大小为16px,1rem=16px;html字体大小为10px;1rem=10px;2rem=20px

```js
function setRem(){
    var uiWidth=375;
    var html=document.getElementsByTagName('html')[0];
    var clientWidth=document.documentElement.clientWidth||document.body.clientWidth;
    html.style.fontSize=(clientWidth/uiWidth)*10+'px';
}
window.addEventListener('resize',setRem);
window.addEventListener('load', setRem);
```

## 响应式布局

响应式布局是Ethan Marcotte[伊桑马 卡特]在2010年5月份提出的一个概念,简而言之,就是一个网站能够兼容多个终端——而不是为每个终端做一个特定的版本。这个概念是为了解决移动互联网浏览而诞生的。

大白话

> 一个网站能够兼容多个终端
>
> 是同一页面在不同屏幕尺寸下有不同的布局,一套页面,可以再不同的设备商正常显示

当页面足够小的时候,会隐藏掉一部分内容,重点显示主要的内容

例如:

屏幕最大480px时,展示一套css样式

屏幕最小480px,最大760px,展示一套css样式

屏幕最小760px,最大995px时,展示一套css样式

屏幕最小1100px时,展示一套css样式

将三种已有的开发技术整合起来,并命名

> 弹性布局
>
> 弹性图片
>
> 媒体和媒体查询

## 媒体查询

媒体查询(Media Queries)

> 媒体类型
>
> 媒体特战
>
> 关键词

媒介	平台

兼容性

> 移动端上一般对css3支持比较好的高级浏览器不需要考虑响应式布局的媒体查询的兼容问题
>
> IE8及以下版本的浏览器不支持媒体查询

### 什么事媒体查询

> 媒体：指的就是各种设备(移动设备、PC设备)
>
> 查询：指的是要检测属于那种设备
>
> 
>
> 媒体查询:通过查询当前属于哪种设备,让网页能够在不同的设备上正常的预览。根据设备展示不同的css样式

#### 媒体类型：

1、all（所有的设备）

2、print（打印设备）

screen（屏幕、电脑屏幕、平板电脑，智能手机）

常用的是以上三种，w3c规定来了10余种媒体类型，最常用的就是上述三种

| 值                            | 描述                                                         |
| :---------------------------- | :----------------------------------------------------------- |
| <font color=red>all</font>    | <font color=red>用于所有设备</font>                          |
| aural                         | 已废弃。用于语音和声音合成器                                 |
| braille                       | 已废弃。 应用于盲文触摸式反馈设备                            |
| embossed                      | 已废弃。 用于打印的盲人印刷设备                              |
| handheld                      | 已废弃。 用于掌上设备或更小的装置，如PDA和小型电话           |
| <font color=red>print</font>  | <font color=red>用于打印机和打印预览</font>                  |
| projection                    | 已废弃。 用于投影设备                                        |
| <font color=red>screen</font> | <font color=red>用于电脑屏幕，平板电脑，智能手机等。</font>  |
| speech                        | 应用于屏幕阅读器等发声设备                                   |
| tty                           | 已废弃。 用于固定的字符网格，如电报、终端设备和对字符有限制的便携设备 |
| tv                            | 已废弃。 用于电视和网络电视                                  |


#### 媒体的特性：

用来描述设备的特点,比如宽度,高度

可以将媒体特性看成:

> <font color=red>“媒体类型（判断条件）+ CSS（符合条件的样式规则）”</font>



| 值                      | 描述                                                         |
| :---------------------- | :----------------------------------------------------------- |
| aspect-ratio            | 定义输出设备中的页面可见区域宽度与高度的比率                 |
| color                   | 定义输出设备每一组彩色原件的个数。如果不是彩色设备，则值等于0 |
| color-index             | 定义在输出设备的彩色查询表中的条目数。如果没有使用彩色查询表，则值等于0 |
| device-aspect-ratio     | 定义输出设备的屏幕可见宽度与高度的比率。                     |
| device-height           | 定义输出设备的屏幕可见高度。                                 |
| device-width            | 定义输出设备的屏幕可见宽度。                                 |
| grid                    | 用来查询输出设备是否使用栅格或点阵。                         |
| height                  | 定义输出设备中的页面可见区域高度。                           |
| max-aspect-ratio        | 定义输出设备的屏幕可见宽度与高度的最大比率。                 |
| max-color               | 定义输出设备每一组彩色原件的最大个数。                       |
| max-color-index         | 定义在输出设备的彩色查询表中的最大条目数。                   |
| max-device-aspect-ratio | 定义输出设备的屏幕可见宽度与高度的最大比率。                 |
| max-device-height       | 定义输出设备的屏幕可见的最大高度。                           |
| max-device-width        | 定义输出设备的屏幕最大可见宽度。                             |
| max-height              | 定义输出设备中的页面最大可见区域高度。                       |
| max-monochrome          | 定义在一个单色框架缓冲区中每像素包含的最大单色原件个数。     |
| max-resolution          | 定义设备的最大分辨率。                                       |
| max-width               | 定义输出设备中的页面最大可见区域宽度。                       |
| min-aspect-ratio        | 定义输出设备中的页面可见区域宽度与高度的最小比率。           |
| min-color               | 定义输出设备每一组彩色原件的最小个数。                       |
| min-color-index         | 定义在输出设备的彩色查询表中的最小条目数。                   |
| min-device-aspect-ratio | 定义输出设备的屏幕可见宽度与高度的最小比率。                 |
| min-device-width        | 定义输出设备的屏幕最小可见宽度。                             |
| min-device-height       | 定义输出设备的屏幕的最小可见高度。                           |
| min-height              | 定义输出设备中的页面最小可见区域高度。                       |
| min-monochrome          | 定义在一个单色框架缓冲区中每像素包含的最小单色原件个数       |
| min-resolution          | 定义设备的最小分辨率。                                       |
| min-width               | 定义输出设备中的页面最小可见区域宽度。                       |
| monochrome              | 定义在一个单色框架缓冲区中每像素包含的单色原件个数。如果不是单色设备，则值等于0 |
| orientation             | 定义输出设备中的页面可见区域高度是否大于或等于宽度。         |
| resolution              | 定义设备的分辨率。如：96dpi, 300dpi, 118dpcm                 |
| scan                    | 定义电视类设备的扫描工序。                                   |
| width                   | 定义输出设备中的页面可见区域宽度。                           |



媒体特性语法：

```html
<style>
@media  媒体类型  and  （媒体特性）{ 
        CSS样式 
}
</style>


例子：
  @media screen and (max-width:500px) {
            body{
                background-color: yellow;
            }
        }
```

#### 媒体查询案例：

```html
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="">
    <script src=""></script>

    <style>
     
        @media screen and (max-width:500px){
            body{
                background-color: yellow;
            }
        }

        @media screen and (min-width:501px) and (max-width:900px) {
            body{
                background-color: green;
            }
        }

        @media screen and (min-width:901px) {
            body{
                background-color: red;
            }
        }

    </style>
</head>

<body>
   <!--  
    - 宽度大于900px 背景red
    - 介于500-900px 背景 green
    - 小于500px 背景yellow -->



</body>

</html>
```



#### 通过媒体查询，解决屏幕获取不到高清图片

思路： 通过媒体查询dpr的值，不同的值显示不同质量的图片

在开发中，我们会根据dpr的值显示1倍图，2倍图，3倍图等

此处为了演示，我们只让显示不同的图片，来代替123倍图

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div{
            width: 800px;
            height: 500px;
        }
        @media screen and (-webkit-min-device-pixel-ratio: 1){
            div{
                background:url(./image/1.jpg);
            }
        }

        @media screen and (-webkit-min-device-pixel-ratio: 2){
            div{
                background:url(./image/2.jpg);
            }
        }

        @media screen and (-webkit-min-device-pixel-ratio: 3){
            div{
                background:url(./image/3.jpg);
            }
        }
    </style>
</head>
<body>
    <div>

    </div>
</body>
</html>
```



刚才判断属性的时候，我们使用了and关键词，and表示多个条件同时满足

除了and，还有其他的关键词

#### and：表示多个条件同时满足

```css
@media screen and （max-width：1200px）{样式代码…}

```



#### only:

only：指定某种特定的媒体类型，可以用来排除不支持媒体查询的

```css
<link href = "style.css"  media = " only screen and  (max-width：500px) "  
```

标志，只有在屏幕最大宽度是500px的屏幕下，会执行style.css样式only.css:

```css
div{
    width: 100%;
    height: 300px;
    background-color: yellow;
}
```

```html
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/only.css" media="only screen and (max-width:500px)">
    <script src=""></script>
</head>

<body>
    <div></div>

</body>

</html>
```

#### not：

排除某种指定的媒体类型，即排除符合表达式的设

表示取反

```css
@media  not  print  and （max-width：1200px）{样式代码…}

```

**引入方式：**

@media方式：

```
@media 媒体类型 {
        选择器{ /*样式代码写在这里…*/}
}

```

## 7、媒体查询冲突

```html
<link rel="stylesheet" href="styleA.css" 
    media="screen  and (min-width: 800px)">
<link rel="stylesheet" href="styleB.css" 
    media="screen  and (min-width: 600px) and (max-width: 800px)">
<link rel="stylesheet" href="styleC.css" 
    media="screen  and (max-width: 600px)">

```

如图，在800,600等临界值处，会有冲突

修改为：

```html
<link rel="stylesheet" href="styleA.css" media="screen and(min-width:801px)">
<link rel="stylesheet" href="styleB.css" 
    media="screen and (max-width: 800px)">
<link rel="stylesheet" href="styleC.css" 
    media="screen and (max-width: 600px)">

```

## 8、响应式实战：热门活动1



#### 屏幕分辨率大于1024px：

![image-20210411211218315](/image-20210411211218315.png)

```css
@media all and (min-width:1024px) {
    .box{
        width: 1024px;
        padding: 30px;
        }
}
/*省略其他的CSS样式*/

```

#### 屏幕分辨率在638px到1023px之间:

![image-20210411211308313](/image-20210411211308313.png)

```css
@media all and (min-width:638px) and (max-width:1023px) {
    .box{
        width: 638px;
        padding: 24px;
        margin: 10px auto 0;
}
/*省略其他的CSS样式*/

```

#### 屏幕分辨率在320px到637px之间:

![image-20210411211338192](/image-20210411211338192.png)

```css
@media all and (min-width:320px) and (max-width:639px) {
    .box{
        width: 320px;
        padding: 20px;
        margin: 10px auto 0;
}
/*省略其他的CSS样式*/

```

示例：

代码：

```html
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="">
    <script src=""></script>

    <style>
        ul{
            padding: 20px;
            overflow: hidden;
            list-style: none;
        }
        ul>li{
            float: left;
            margin: 20px;
        }

        /* 屏幕分辨率在320px到639px之间: */
        @media screen and (min-width:320px) and (max-width:639px) {
            ul{
                width: 240px;
                background-color: rgb(187, 130, 24);
            }
            li{
                width: 200px;
                height: 50px;
                background-color: rgb(35, 202, 194);
            }
        }

        /* 屏幕分辨率在638px到1023px之间: */
        @media screen and (min-width:638px) and (max-width:1023px) {
            ul{
                width: 480px;
                background-color: rgb(36, 133, 120);
            }
            li{
                width: 200px;
                height: 50px;
                background-color: rgb(36, 170, 36)
            }
        }

            /* 屏幕分辨率大于1024px： */
        @media screen and (min-width:1024px) {
            ul{
                width: 960px;
                background-color: rgb(197, 139, 73);
            }
            li{
                width: 200px;
                height: 50px;
                background-color: rgb(36, 170, 36)
            }
        }
    </style>
</head>

<body>
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>

</body>

</html>
```



## 9、响应式布局优缺点

#### 优点:

- 不同分辨率设备灵活性强,[比自适应强，自适应只是宽度的自适应]
- 多终端视觉和操作体验好
- 响应式web设计中的大部分技术都可以用在WebApp开发中[可以用在移动端设备，也可以用在pc端]
  

#### 缺点

- 兼容各种设备工作量大，效率低下
- 代码累赘，会出现隐藏无用的元素，加载时间加长



## 10、响应式和自适应的区别

- 响应式的概念覆盖了自适应，但是包括的东西更多。响应式布局可以根据屏幕的大小自动的调整页面的展现方式，以及布局
- 自适应还是暴露出一个问题，如果屏幕太小，即使网页能够根据屏幕大小进行适配，也会感觉在小屏幕上查看，内容过于拥挤
- 响应式解决了自适应布局的问题。它可以自动识别屏幕宽度、并做出相应调整，布局和展示的内容可能会有所变动



## 11、rem响应式布局

如果移动端页面只在移动端访问，那么使用rem可以实现响应式布局



#### 实现原理：

动态改变 html的font-size值的大小，来完成rem实现响应式布局



#### rem实现响应式原理：

rem 的值都是根据html的fontsize进行计算的

统一缩放元素大小，只要修改html的fontsize

```css
html  {   font-size: 100px;
		/* 将图片的大小变成 75*75 */
		/* font-size: 50px; */}
main {
		 width: 1.5rem; height: 1.5rem;background-color: #f38;
		 }
/*省略其他的CSS样式*/

```





#### 使用rem开发响应式布局步骤1:

- 从Ui设计师拿到设计稿，一般尺寸都是以iphone 6的尺寸为准 750**1334（638*1136）
- 在样式中给html设定一个fontsize的值，我们一般设置一个方便后续计算的值，例如10px、100px等，我们使用100px
- 写样式
  - 完全按照设计稿的尺寸来写样式，设计稿上的长度、height、margin、padding、字体的值是多少，我们就写多少，这样可以100%还原设计稿
  - 注意：需要把得到的像素值/100px,转换为rem单位



#### 使用rem开发响应式布局步骤2:

- 根据当前屏幕的宽度和设计稿的宽度来重新计算html的FontSize的大小
- 根据当前屏幕宽度和设计稿的宽度的比例，动态计算当前宽度下的fontsize值大小，如果fontsize值改变了，之前设定的所有的rem单位的值自动会跟着改变

```javascript
<script>
    function setRem() {
        var ui_w = 375;
        // 获取屏幕的宽度
        var clientWidth = document.documentElement.clientWidth || document.body.clientWidth;
       

        // 通过js动态改变html根节点字体大小
        var html_ = document.getElementsByTagName('html')[0];
        html_.style.fontSize = (clientWidth/ui_w)*100 +'px';
    }
    // window.onresize 浏览器被重置大小执行事件
    window.onresize = setRem;
		window.onload = setRem;
</script>
```



## 12、判断是pc还是移动浏览器

通过JavaScript判断终端类型

```javascript
//把请求头信息转为小写  
//user agent是指用户代理,使服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、浏览器插件等。
sUserAgent = navigator.userAgent.toLowerCase();

sUserAgent.match('ipad') == "ipad";
sUserAgent.match('ucweb') == "ucweb";
...
```





```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>判断是PC还是移动端浏览器</title>
</head>
<body>


</body>
</html>

<script>
    
function browserRedirect() {
var curURL = window.location.href;
var sUserAgent = navigator.userAgent.toLowerCase();

var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
var bIsMidp = sUserAgent.match(/midp/i) == "midp";
var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
var bIsAndroid = sUserAgent.match(/android/i) == "android";
var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";



if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {
    // 移动端浏览器 
    document.write("phone");
    //移动端浏览器
    window.location.href = "https://m.jd.com/";
    // if (curURL.indexOf("jd.com") != -1) {
    //     window.location.href = "https://m.jd.com/";
    // }
} else {
    // PC端浏览器
    document.write("pc");
    //  if (curURL.indexOf("jd.com") != -1) {
        // window.location.href = "https://www.jd.com/";
    //   }
    }
}

browserRedirect()


</script>
```